:root {
  --bg: #f7f4ec;
  --text: #24211d;
  --muted: #6d665e;
  --accent: #2b648e;
  --rule: #dad3c8;
  --code-text: #3a3530;
  --blockquote-text: #33302b;
  --focus: rgba(43, 100, 142, 0.42);
  --gutter: clamp(1rem, 3.8vw, 3rem);
  --reading-width: 52rem;
  --sidebar-width: 12rem;
  --sidebar-gap: clamp(1.6rem, 4vw, 3rem);
  --shell-max:
    calc(
      var(--reading-width) + var(--sidebar-width) + var(--sidebar-gap) +
        (var(--gutter) * 2)
    );
  --font-sans:
    -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display",
    "Helvetica Neue", "Segoe UI", Arial, sans-serif;
  --font-mono:
    "SF Mono", ui-monospace, Menlo, Monaco, "Cascadia Mono", "Roboto Mono",
    monospace;
  --glass-container-fallback: rgba(248, 244, 235, 0.52);
  --glass-container-border: rgba(120, 106, 90, 0.28);
  --glass-social-fallback: rgba(218, 204, 186, 0.64);
  --glass-social-border: rgba(103, 85, 66, 0.42);
}

html[data-theme="dark"] {
  --bg: #15120f;
  --text: #e9e1d4;
  --muted: #aea18f;
  --accent: #91bfe2;
  --rule: #3b352d;
  --code-text: #d8ccbb;
  --blockquote-text: #d0c5b4;
  --focus: rgba(145, 191, 226, 0.45);
  --glass-container-fallback: rgba(33, 29, 25, 0.58);
  --glass-container-border: rgba(121, 106, 89, 0.42);
  --glass-social-fallback: rgba(25, 22, 19, 0.72);
  --glass-social-border: rgba(139, 121, 99, 0.5);
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  padding: 0;
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-sans);
  font-size: 18.5px;
  line-height: 1.68;
  letter-spacing: 0.002em;
  opacity: 1;
  transition: opacity 150ms ease;
}

body.is-leaving {
  opacity: 0;
}

.theme-toggle {
  position: relative;
  width: 2.9rem;
  height: 2.9rem;
  color: var(--text);
  background: transparent;
  border: 1px solid var(--rule);
  border-radius: 999px;
  padding: 0;
  cursor: pointer;
  line-height: 1;
  margin: 0;
  transition:
    border-color 120ms ease,
    color 120ms ease;
}

.theme-icon {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  font-size: 1.24rem;
  transition:
    opacity 140ms ease,
    transform 140ms ease;
}

.theme-moon {
  opacity: 0;
  transform: scale(0.85);
}

html[data-theme="dark"] .theme-sun {
  opacity: 0;
  transform: scale(0.85);
}

html[data-theme="dark"] .theme-moon {
  opacity: 1;
  transform: scale(1);
}

.theme-toggle:hover {
  color: var(--accent);
  border-color: var(--accent);
}

.site-shell {
  max-width: var(--shell-max);
  margin: 0 auto;
  min-height: 100vh;
  padding: clamp(3.6rem, 8.2vh, 5.4rem) var(--gutter) 2.2rem;
  display: grid;
  grid-template-columns: var(--sidebar-width) minmax(0, var(--reading-width));
  grid-template-areas:
    "topbar topbar"
    "sidebar main";
  grid-template-rows: auto 1fr;
  column-gap: var(--sidebar-gap);
  row-gap: 1.45rem;
  align-items: start;
}

.glass-fallback {
  background: var(--glass-container-fallback);
  border: 1px solid var(--glass-container-border);
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.18),
    0 10px 24px rgba(0, 0, 0, 0.12);
}

.glass-container {
  border-radius: 0.78rem;
}

.glass-social {
  background: var(--glass-social-fallback);
  border-color: var(--glass-social-border);
}

.topbar-glass {
  grid-area: topbar;
  width: 100%;
}

.site-sidebar-glass {
  grid-area: sidebar;
  position: sticky;
  top: clamp(3.2rem, 7.2vh, 4.5rem);
  align-self: start;
  width: 100%;
  border-radius: 0.75rem;
}

.site-footer-glass {
  width: calc(100% + var(--sidebar-width) + var(--sidebar-gap));
  margin-left: calc(-1 * (var(--sidebar-width) + var(--sidebar-gap)));
  max-width: none;
  margin-top: auto;
  border-radius: 0.72rem;
}

.site-sidebar {
  border-radius: 0.75rem;
  padding: 0.68rem 0.58rem 0.72rem;
  background: transparent;
  border: 0;
}

.site-sidebar-label {
  margin: 0 0 0.4rem;
  color: var(--muted);
  font-size: 0.92rem;
  letter-spacing: 0.04em;
  text-transform: uppercase;
}

.site-nav-link {
  display: block;
  width: 100%;
  text-align: left;
  color: var(--muted);
  text-decoration: none;
  background: transparent;
  border-radius: 0.4rem;
  padding: 0.35rem 0.5rem;
  font: 500 1rem/1.35 var(--font-sans);
  transition:
    color 120ms ease,
    background 120ms ease;
}

.site-nav-link + .site-nav-link {
  margin-top: 0.08rem;
}

.site-nav-link:hover {
  color: var(--accent);
}

.site-nav-link:active {
  opacity: 0.84;
}

body[data-page="home"] .site-nav-link[data-node="home"],
body[data-page="experience"] .site-nav-link[data-node="experience"],
body[data-page="thoughts"] .site-nav-link[data-node="thoughts"],
body[data-page="entry"] .site-nav-link[data-node="thoughts"] {
  color: var(--text);
  background: color-mix(in srgb, var(--rule) 42%, transparent 58%);
}

.page {
  grid-area: main;
  min-width: 0;
  min-height: 100%;
  display: flex;
  flex-direction: column;
  gap: 1.3rem;
}

.page > * {
  width: 100%;
  margin-left: 0;
  margin-right: 0;
}

.home-vanta-bg {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
}

.home-vanta-bg::after {
  content: "";
  position: absolute;
  inset: 0;
  background: color-mix(in srgb, var(--bg) 68%, transparent 32%);
  pointer-events: none;
}

.site-shell.with-home-bg {
  position: relative;
  z-index: 1;
}

.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  margin: 0;
  padding: 0.72rem 0.84rem;
  border-radius: 0.78rem;
  background: transparent;
  border: 0;
}

.topbar-path {
  margin: 0;
  min-width: 0;
  flex: 1 1 auto;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.topbar-actions {
  display: inline-flex;
  align-items: center;
  gap: 0.72rem;
  flex: 0 0 auto;
}

.topbar-socials {
  display: inline-flex;
  align-items: center;
  gap: 0.48rem;
}

.topbar-icon-link {
  display: inline-block;
  line-height: 0;
  text-decoration: none;
}

.topbar-icon-glass {
  width: 2.9rem;
  height: 2.9rem;
  border-radius: 999px;
}

.topbar-utility {
  display: inline-flex;
  align-items: center;
  gap: 0.46rem;
  padding-left: 0.7rem;
  margin-left: 0.12rem;
  border-left: 1px solid color-mix(in srgb, var(--rule) 86%, transparent 14%);
}

.social-icon-inner {
  width: 2.9rem;
  height: 2.9rem;
  display: inline-grid;
  place-items: center;
  color: var(--text);
  background: transparent;
  border: 0;
  border-radius: 999px;
  text-decoration: none;
  transition:
    color 120ms ease,
    border-color 120ms ease;
}

.social-icon-inner svg {
  width: 1.08rem;
  height: 1.08rem;
}

.social-icon-inner svg path {
  fill: currentColor;
}

.social-icon-inner svg circle:not([fill="none"]) {
  fill: currentColor;
}

.topbar-icon-link:hover .social-icon-inner {
  color: var(--accent);
}

.site-footer {
  padding: 0.58rem 0.74rem;
  border: 0;
  background: transparent;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
}

.site-footer-credit {
  margin: 0;
  color: var(--muted);
  font-size: 0.95rem;
}

.site-footer-link {
  color: var(--muted);
  text-decoration: none;
  font-size: 0.95rem;
}

.site-footer-link:hover {
  color: var(--accent);
}

.fs-path {
  margin: 0;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0;
  font-size: 0.98rem;
  line-height: 1.3;
  color: var(--muted);
}

.fs-prefix {
  color: var(--text);
  font-weight: 590;
}

.fs-path-icon {
  font-size: 0.92rem;
  line-height: 1;
  opacity: 0.86;
  margin-right: 0.22rem;
}

.fs-path-link {
  color: inherit;
  text-decoration: none;
}

.fs-path-link:hover {
  color: var(--accent);
}

.fs-path-current {
  color: var(--text);
  font-weight: 590;
}

.fs-sep {
  color: var(--muted);
}

.home-title {
  margin: 0 0 0.8rem;
  font-family: var(--font-sans);
  font-size: clamp(1.45rem, 2.2vw, 1.9rem);
  line-height: 1.25;
  font-weight: 600;
}

.home-intro {
  display: block;
}

.home-block {
  margin-top: 1.85rem;
}

.home-list {
  margin: 0;
  padding-left: 1.2rem;
}

.home-list li + li {
  margin-top: 0.35rem;
}

.experience-block {
  margin-top: 2.35rem;
}

.experience-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.experience-item {
  display: grid;
  grid-template-columns: minmax(0, 19rem) minmax(0, 1fr);
  gap: 1.6rem;
  align-items: start;
  padding: 1.3rem 0;
  border-top: 1px solid color-mix(in srgb, var(--rule) 76%, transparent 24%);
}

.experience-item:first-child {
  border-top: 0;
  padding-top: 0.25rem;
}

.experience-meta,
.experience-details {
  min-width: 0;
}

.experience-details {
  padding-top: 0.1rem;
}

.experience-header {
  display: flex;
  align-items: flex-start;
  gap: 0.95rem;
}

.experience-heading {
  min-width: 0;
}

.experience-logo {
  flex: 0 0 auto;
  width: 4.35rem;
  height: 4.35rem;
  border-radius: 0.56rem;
  border: 0;
  background: transparent;
  display: grid;
  place-items: center;
  color: var(--muted);
  font-family: var(--font-sans);
  font-size: 1.04rem;
  font-weight: 700;
  letter-spacing: 0.02em;
  overflow: hidden;
}

.experience-logo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  padding: 0;
  box-sizing: border-box;
  display: block;
  border: 0;
  border-radius: inherit;
}

.experience-role {
  margin: 0;
  font-family: var(--font-sans);
  font-size: 1.27rem;
  line-height: 1.25;
  font-weight: 620;
  transition: color 150ms ease;
}

.experience-company {
  margin: 0.26rem 0 0;
  color: var(--muted);
  font-size: 1.04rem;
  line-height: 1.38;
}

.experience-period {
  margin: 0.78rem 0 0;
  color: var(--text);
  font-size: 0.99rem;
  line-height: 1.4;
}

.experience-location {
  margin: 0.16rem 0 0;
  color: var(--muted);
  font-size: 0.99rem;
  line-height: 1.4;
}

.experience-summary {
  margin: 0;
  font-size: 1.06rem;
  line-height: 1.62;
}

.experience-item:hover .experience-role {
  color: var(--accent);
}

.experience-item:hover .experience-company {
  color: color-mix(in srgb, var(--accent) 42%, var(--muted) 58%);
}

.finder-main {
  width: 100%;
  min-width: 0;
}

.finder-toolbar {
  margin: 0 0 0.42rem;
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 0.9rem;
}

.finder-heading {
  margin: 0;
}

.finder-tools {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.sort-wrap {
  font-family: var(--font-sans);
  font-size: 0.95rem;
  color: var(--muted);
  display: inline-flex;
  align-items: center;
  gap: 0.42rem;
}

.sort-wrap select {
  font: inherit;
  color: var(--text);
  background: transparent;
  border: 1px solid var(--rule);
  border-radius: 0.48rem;
  padding: 0.28rem 0.46rem;
}

.finder-column-head,
.finder-row {
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(7.7rem, 0.34fr) minmax(8.6rem, 0.38fr);
  align-items: center;
  column-gap: 0.95rem;
}

.finder-column-head {
  margin: 0;
  padding: 0 0 0.45rem;
  border-bottom: 1px solid var(--rule);
  color: var(--muted);
  font-size: 0.86rem;
  letter-spacing: 0.045em;
  text-transform: uppercase;
}

.finder-column-head span:last-child {
  text-align: right;
}

.finder-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.finder-list li + li {
  margin-top: 0;
}

.finder-row {
  margin: 0;
  padding: 0.64rem 0;
  border-bottom: 1px solid color-mix(in srgb, var(--rule) 72%, transparent 28%);
}

.finder-row:last-child {
  border-bottom: 0;
}

.finder-name {
  min-width: 0;
}

.finder-file-link {
  display: inline-flex;
  align-items: center;
  font-size: 1.08rem;
  max-width: 100%;
}

.finder-kind,
.finder-date {
  color: var(--muted);
  font-size: 0.94rem;
  line-height: 1.35;
}

.finder-kind {
  text-transform: none;
}

.finder-date {
  text-align: right;
}

.lede {
  margin: 0;
  max-width: 100%;
}

.lede + .lede {
  margin-top: 0.55rem;
}

.rule {
  border: 0;
  border-top: 1px solid var(--rule);
  margin: 2rem 0 1.45rem;
}

.section-label {
  margin: 0 0 0.85rem;
  font-family: var(--font-sans);
  font-size: 1.02rem;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: var(--muted);
}

.entry-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.entry-list li + li {
  margin-top: 1.15rem;
}

.finder-list.entry-list li + li {
  margin-top: 0;
}

.entry-link {
  position: relative;
  display: inline-block;
  color: var(--text);
  text-decoration: none;
  font-size: 1.07rem;
  line-height: 1.35;
  transition:
    color 120ms ease,
    opacity 120ms ease;
}

.entry-link::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -0.08em;
  width: 0;
  height: 1px;
  background: currentColor;
  transition: width 170ms ease;
}

.entry-link:hover {
  color: var(--accent);
}

.entry-link:hover::after {
  width: 100%;
}

.entry-link:focus-visible,
.site-nav-link:focus-visible,
.topbar-icon-link:focus-visible,
.topbar-icon-btn:focus-visible,
.site-footer-link:focus-visible,
.fs-path-link:focus-visible,
.theme-toggle:focus-visible {
  outline: 2px solid var(--focus);
  outline-offset: 2px;
}

.entry-link:active {
  opacity: 0.84;
}

.entry-meta {
  margin: 0.2rem 0 0;
  font-family: var(--font-sans);
  font-size: 0.94rem;
  color: var(--muted);
  letter-spacing: 0.01em;
}

.entry-title {
  margin: 0;
  font-family: var(--font-sans);
  font-size: clamp(1.45rem, 3vw, 1.95rem);
  line-height: 1.28;
  font-weight: 600;
}

.entry .entry-meta {
  margin-top: 0.42rem;
  margin-bottom: 1.7rem;
}

.entry-content {
  max-width: 100%;
}

.entry-content > * {
  margin-top: 0;
  margin-bottom: 0;
}

.entry-content > * + * {
  margin-top: 1.05rem;
}

.entry-content h2,
.entry-content h3,
.entry-content h4 {
  font-family: var(--font-sans);
  font-weight: 600;
  line-height: 1.34;
  letter-spacing: 0.005em;
}

.entry-content h2 {
  font-size: 1.2rem;
  margin-top: 2.1rem;
}

.entry-content h3 {
  font-size: 1.04rem;
  margin-top: 1.75rem;
}

.entry-content a {
  color: var(--accent);
  text-decoration-thickness: 1px;
  text-underline-offset: 2px;
}

.entry-content code {
  font-family: var(--font-mono);
  font-size: 0.84em;
}

.entry-content pre {
  margin-top: 1.2rem;
  margin-bottom: 1.2rem;
  padding: 0 0 0 1rem;
  border-left: 1px solid var(--rule);
  overflow-x: auto;
  white-space: pre;
}

.entry-content pre code {
  font-size: 0.8125rem;
  line-height: 1.55;
  color: var(--code-text);
}

.entry-content blockquote {
  margin: 1.35rem 0;
  padding-left: 1rem;
  border-left: 1px solid var(--rule);
  color: var(--blockquote-text);
}

.entry-content img,
.entry-content video,
.entry-content iframe,
.entry-content svg {
  display: block;
  max-width: 100%;
  height: auto;
}

.entry-content iframe {
  width: 100%;
  min-height: 18rem;
  border: 1px solid var(--rule);
}

.entry-content hr {
  border: 0;
  border-top: 1px solid var(--rule);
  margin: 1.65rem 0;
}

.entry-content ul,
.entry-content ol {
  padding-left: 1.3rem;
}

.entry-content table {
  border-collapse: collapse;
  width: 100%;
  font-size: 0.92em;
}

.entry-content th,
.entry-content td {
  border-bottom: 1px solid var(--rule);
  text-align: left;
  padding: 0.4rem 0.25rem;
}

.entry-content .katex-display {
  margin: 1.1rem 0;
  overflow-x: auto;
  overflow-y: hidden;
}

.entry-content .mermaid {
  margin: 1.3rem 0;
}

.empty-message {
  margin: 1rem 0 0;
  color: var(--muted);
  font-size: 0.9rem;
}

.finder-list .empty-message {
  margin: 0;
  padding: 0.84rem 0;
  border-bottom: 0;
}

body[data-page="thoughts"] .section-label {
  font-size: 1.02rem;
}

body[data-page="thoughts"] .entry-link {
  font-size: 1.12rem;
}

body[data-page="thoughts"] .entry-meta {
  font-size: 0.94rem;
}

body[data-page="thoughts"] .sort-wrap {
  font-size: 0.95rem;
}

@media (max-width: 980px) {
  .site-shell {
    max-width: calc(var(--reading-width) + (var(--gutter) * 2));
    grid-template-columns: 1fr;
    grid-template-areas:
      "topbar"
      "sidebar"
      "main";
    row-gap: 0.95rem;
  }

  .site-sidebar-glass {
    position: static;
  }

  .site-sidebar {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.44rem;
  }

  .site-sidebar-label {
    margin: 0;
    width: 100%;
  }

  .site-nav-link {
    width: auto;
  }

  .site-nav-link + .site-nav-link {
    margin-top: 0;
  }

  .topbar {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.7rem;
  }

  .topbar-path {
    width: 100%;
    white-space: normal;
    overflow: visible;
  }

  .topbar-actions {
    width: 100%;
    justify-content: space-between;
  }

  .topbar-utility {
    padding-left: 0.56rem;
    margin-left: 0;
  }

  .site-footer-glass {
    width: 100%;
    margin-left: 0;
  }

  .site-footer {
    gap: 0.7rem;
  }
}

@media (max-width: 760px) {
  :root {
    --gutter: 1.15rem;
    --reading-width: min(100vw - 2.3rem, 52rem);
  }

  body {
    font-size: 18px;
  }

  .site-shell {
    padding-top: 3.35rem;
    padding-bottom: 1.7rem;
  }

  .topbar-actions {
    flex-wrap: wrap;
    row-gap: 0.44rem;
  }

  .topbar-utility {
    border-left: 0;
    padding-left: 0;
  }

  .finder-toolbar {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.62rem;
  }

  .finder-column-head,
  .finder-row {
    grid-template-columns: minmax(0, 1fr) minmax(6.2rem, 0.42fr) minmax(7.3rem, 0.45fr);
    column-gap: 0.66rem;
  }

  .finder-file-link {
    font-size: 1.03rem;
  }

  .finder-kind,
  .finder-date {
    font-size: 0.9rem;
  }

  .experience-item {
    grid-template-columns: 1fr;
    gap: 0.68rem;
    padding: 1.05rem 0 1.1rem;
  }

  .experience-item:first-child {
    padding-top: 0.15rem;
  }

  .experience-details {
    padding-top: 0;
  }

  .experience-header {
    gap: 0.72rem;
  }

  .experience-logo {
    width: 3.85rem;
    height: 3.85rem;
    border-radius: 0.5rem;
    font-size: 0.98rem;
  }

  .experience-role {
    font-size: 1.16rem;
  }

  .experience-company {
    font-size: 1rem;
  }

  .experience-period,
  .experience-location,
  .experience-summary {
    font-size: 0.98rem;
  }

  .home-intro {
    display: block;
  }
}
